To configure this module, you need to:


#. Go to the menu Settings > General Settings > Multi-Company and enable â€‹Sale from purchase

#. Select the "Warehouse for Sale Orders": it is the warehouse that will be used in the Sale Orders generated from POs coming from other companies..

#. Select the "Intercompany Sale User": is it the user that will be used as creator of the Sale Orders generated from POs coming from other companies.

#. If you check the option "Sale Orders Auto Validation" in the configuration of company B, when you validate a Purchase Order in company A with company B as supplier, the Sale Order will be automatically validated in company B with company A as customer.

#. If you check the option "Sync picking" (for both companies), validating a picking generated by an inter-company purchase/sale will validate the respective picking for the other company.

#. If you check the option "Block manual validation of picking in the destination company" is not possible to validate manually the picking in the destination company.


In Odoo instances that previously used Odoo's `sale_purchase_inter_company_rules`, the field `auto_purchase_order_id` on sale.order will be set but `auto_purchase_line_id` on sale.order.line will not, so historical links will not work properly. It's possible to fix this using:

.. code-block:: sql

    update sale_order_line l
    set auto_purchase_line_id = pl.id
    from sale_order s, purchase_order p, purchase_order_line pl
    where l.order_id = s.id and p.id = s.auto_purchase_order_id
    and s.auto_purchase_order_id is not null and l.auto_purchase_line_id is null
    and pl.product_id = l.product_id and pl.order_id = p.id;
